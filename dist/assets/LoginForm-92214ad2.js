import{r as n,c as v,j as e,d as w}from"./index-c82a535c.js";const N=()=>{const[i,p]=n.useState(""),[d,g]=n.useState(""),[l,r]=n.useState(""),[t,c]=n.useState(!1),f=v(),b=async s=>{var u,x,m;s.preventDefault(),r(""),c(!0);try{await w.login(i,d),f("/admin/events",{replace:!0})}catch(o){console.error("Erreur de connexion:",o);const a=(u=o.response)==null?void 0:u.status,y=(m=(x=o.response)==null?void 0:x.data)==null?void 0:m.retryAfter;if(a===429){const h=Math.ceil((y||900)/60);r(`Trop de tentatives de connexion. Veuillez réessayer dans ${h} minutes.`)}else a===401?r("Identifiants invalides"):a&&a>=500?r("Erreur serveur, veuillez réessayer plus tard"):r("Erreur de connexion, vérifiez votre connexion internet")}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-gray-900 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Administration"}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[l&&e.jsx("div",{className:"text-red-500 text-center text-sm bg-red-100 border border-red-400 rounded px-4 py-3",children:l}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:i,onChange:s=>p(s.target.value),placeholder:"Nom d'utilisateur",className:"w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-600",required:!0,disabled:t}),e.jsx("input",{type:"password",value:d,onChange:s=>g(s.target.value),placeholder:"Mot de passe",className:"w-full px-3 py-2 border border-gray-700 rounded-md bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-600",required:!0,disabled:t})]}),e.jsx("button",{type:"submit",disabled:t,className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center justify-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Connexion..."]}):"Se connecter"})]})]})})};export{N as default};
